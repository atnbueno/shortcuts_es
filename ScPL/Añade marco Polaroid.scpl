// Original: https://routinehub.co/shortcut/5027
// ScPL conversion, refactoring, image optimization and translation: https://routinehub.co/user/atnbueno

@ShowInShareSheet [file image avasset]
@ShowInWidget false
@Icon boxoutline
@Color darkblue
Comment 
| "Add Polaroid Frame 📸" Atajo por Brad Siefert, @bksiefert
| Versión: 1.0
|
| Este atajo toma una imagen y la coloca en un marco estilo Polaroid. Si la imagen no es cuadrada, recorta un cuadrado desde el centro de la foto. Tiene opciones para un marco blanco o negro y una vez hecho, puedes escribir o dibujar en la imagen. Funciona con múltiples imágenes.
|
| Me gusta dibujar el nombre de la persona en la foto. 🖊

Comment
| El atajo original está en https://routinehub.co/shortcut/5027
|
| Modificaciones realizadas por @atnbueno (2020-06-06):
| - Traducción a español
| - Conversión a ScPL (compatiblidad con iOS 12)
| - Optimización de las imágenes de los marcos (11% de las originales)
|
| Salvo éste, los comentarios son la traducción de los del autor del atajo original

GetVariable s:ShortcutInput
Count "Items"
If input=Equals number=0 value=0
	SelectPhotos true
Otherwise
	GetVariable s:ShortcutInput
End -> mv:"Foto inicial"

Comment
| Creé dos marcos diferentes 🖼, un marco blanco y un marco negro y los almacené en base64. Una vez seleccionado, el marco se decodifica para superponerse más tarde en el atajo.
ChoosefromMenu prompt="¿Quieres un marco blanco o un marco negro?" items=["Marco blanco", "Marco negro"]
Case
	Text "iVBORw0KGgoAAAANSUhEUgAABoAAAAgAAQMAAAA8GmN0AAAABlBMVEX///8AAABVwtN+AAAAAnRSTlP/AOW3MEoAAAU3SURBVHja7c8BAQAABAAg/08zA9SDgnsAAAAAAAAAAAAAAAAAAAAAAAAAcikhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhofmEhISEhISEhISEhISEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoaN8bw1apb5oAAAAASUVORK5CYII="
Case
	Text "iVBORw0KGgoAAAANSUhEUgAABoAAAAgAAQAAAAAur8yaAAAAAnRSTlMAAQGU/a4AAAU3SURBVHja7c8BAQAABAAg/08zA9SDgnsAAAAAAAAAAAAAAAAAAAAAAAAAcikhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhofmEhISEhISEhISEhISEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoaN8bw1apb5oAAAAASUVORK5CYII="
End
Base64Encode mode=Decode -> mv:"Marco seleccionado"

Comment
| Esta "Repetir con cada uno" permite que el atajo acepte y produzca múltiples imágenes. Comprueba si cada imagen es cuadrada y si no lo es avisa al usuario de que se recortará el centro de la imagen.
|
| El segundo "Si" verifica si la imagen es vertical u horizontal y cambia el tamaño, convierte, recorta y luego superpone en función de esa entrada. Luego le da al usuario la posibilidad de marcar, compartir y luego guardar en el álbum Recientes de la aplicación Fotos.
|
| El tamaño interior del marco Polaroid es un cuadrado de 1472px por 1472px. El tamaño de toda la Polaroid es de 1664px por 2048px.
GetVariable mv:"Foto inicial"
RepeatwithEach
	GetVariable v:"Repeat Item"{as: image, get: height}
	If input=Equals number=v:"Repeat Item"{as: image, get: width} value=v:"Repeat Item"{as: image, get: width}
	Otherwise
		ShowAlert message="Esta foto no es cuadrada. Se recortará al centro de la imagen. ¿Quieres continuar?"
	End
	GetVariable v:"Repeat Item"{as: image, get: width}
	If input="Is Greater Than" number=v:"Repeat Item"{as: image, get: height}
		GetVariable v:"Repeat Item"
		ResizeImage height=1492 width=0 // equivalent to width=Auto (required)
	Otherwise
		GetVariable v:"Repeat Item"
		ResizeImage width=1492 // height=Auto is implied
	End
	ConvertImage quality=1 preserveMetadata=false
	CropImage width=1492 height=1492 -> mv:"Imagen recortada"
	GetVariable mv:"Marco seleccionado"
	OverlayImage image=mv:"Imagen recortada" showImageEditor=false position=Custom xCoordinate=96 yCoordinate=96
	Markup
	SavetoPhotoAlbum
End
